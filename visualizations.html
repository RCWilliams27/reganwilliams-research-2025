<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Graph Entropy Visualizations</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 0;
    }
    header, footer {
      background-color: #343a40;
      color: white;
      text-align: center;
      padding: 1em 0;
    }
    nav {
      background-color: #495057;
      display: flex;
      justify-content: center;
      padding: 0.5em 0;
    }
    nav a {
      color: white;
      margin: 0 1em;
      text-decoration: none;
      font-weight: bold;
    }
    nav a:hover {
      text-decoration: underline;
    }
    main {
      max-width: 1000px;
      margin: auto;
      padding: 2em;
    }
    .plot-container {
      margin-bottom: 4em;
      background: white;
      border-radius: 8px;
      padding: 1em;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .plot-container h2 {
      margin-top: 0;
    }
    details {
      margin-top: 1em;
      font-size: 1rem;
      cursor: pointer;
    }
    details summary {
      font-weight: bold;
      font-size: 1.1rem;
      outline: none;
      list-style: none;
    }
    details[open] summary::after {
      content: "▲";
      float: right;
      font-size: 0.8rem;
    }
    details summary::after {
      content: "▼";
      float: right;
      font-size: 0.8rem;
    }
    details p {
      margin: 0.5em 0 0 0;
      padding-left: 1em;
      color: #333;
    }
  </style>
</head>
<body>

<header>
  <h1>Spectral Graph Theory and Quantum Mechanics</h1>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="visualizations.html">Visualizations</a>
  <a href="results.html">Results</a>
  <a href="meet.html">Meet Us</a>
</nav>

<main>
  <section class="plot-container">
    <h2>Laplacian Entropy</h2>
    <div id="laplacianPlot" style="height:500px;"></div>
    <details>
      <summary>Explanation</summary>
      <p>Laplacian entropy measures the uncertainty associated with the graph's Laplacian matrix eigenvalues.</p>
    </details>
  </section>

  <section class="plot-container">
    <h2>Adjacency Entropy</h2>
    <div id="adjacencyPlot" style="height:500px;"></div>
    <details>
      <summary>Explanation</summary>
      <p>Adjacency entropy measures the uncertainty associated with the graph's Adjacency matrix eigenvalues.</p>
    </details>
  </section>

  <section class="plot-container">
    <h2>Entropy Ratio (Laplacian / Adjacency)</h2>
    <div id="ratioPlot" style="height:500px;"></div>
    <details>
      <summary>Explanation</summary>
      <p>This ratio compares the entropy values computed from Laplacian and adjacency matrices.</p>
    </details>
  </section>

  <section class="plot-container">
    <h2>Euler Characteristic</h2>
    <div id="eulerPlot" style="height:500px;"></div>
    <details>
      <summary>Explanation</summary>
      <p>The Euler characteristic (χ) represents the topological invariant defined as vertices minus edges (V - E).</p>
    </details>
  </section>
</main>

<script>
  fetch('VisualizationData/entropy_data.csv')
    .then(response => response.text())
    .then(data => {
      const rows = data.trim().split('\n').map(row => row.split(','));
      const header = rows.shift(); // ['n', 'graphType', 'laplacian', 'adjacency', 'ratio', 'euler']

      const categories = ['laplacian', 'adjacency', 'ratio', 'euler'];
      const plots = {};
      const graphTypes = new Set();

      for (const cat of categories) {
        plots[cat] = {};
      }

      for (const row of rows) {
        const [nStr, type, lapStr, adjStr, ratioStr, eulerStr] = row;
        const n = parseInt(nStr);
        const lap = parseFloat(lapStr);
        const adj = parseFloat(adjStr);
        const ratio = parseFloat(ratioStr);
        const euler = parseFloat(eulerStr);

        graphTypes.add(type);

        if (!plots.laplacian[type]) {
          for (const cat of categories) {
            plots[cat][type] = { x: [], y: [] };
          }
        }

        plots.laplacian[type].x.push(n);
        plots.laplacian[type].y.push(lap);
        plots.adjacency[type].x.push(n);
        plots.adjacency[type].y.push(adj);
        plots.ratio[type].x.push(n);
        plots.ratio[type].y.push(ratio);
        plots.euler[type].x.push(n);
        plots.euler[type].y.push(euler);
      }

      function makeTraces(category) {
        return Array.from(graphTypes).map(type => ({
          x: plots[category][type].x,
          y: plots[category][type].y,
          mode: 'lines+markers',
          type: 'scatter',
          name: type,
          hovertemplate: `n=%{x}<br>${category}=%{y:.4f}<extra>${type}</extra>`
        }));
      }

      const commonAxisStyle = {
        titlefont: {size: 16, family: 'Arial, sans-serif'},
        tickfont: {size: 14, family: 'Arial, sans-serif'},
        automargin: true,
        zeroline: false,
        gridcolor: '#ddd',
        zerolinecolor: '#ddd',
        zerolinewidth: 1,
        ticks: 'outside',
        ticklen: 6,
        tickwidth: 1,
        tickcolor: '#888',
      };

      function makeLayout(title, xTitle, yTitle) {
        return {
          title: { text: title, font: { size: 20 }},
          margin: { t: 60, b: 60, l: 70, r: 40 },
          xaxis: {
            ...commonAxisStyle,
            title: { text: xTitle, standoff: 15 },
            tickangle: 0
          },
          yaxis: {
            ...commonAxisStyle,
            title: { text: yTitle, standoff: 35}
          },
          plot_bgcolor: '#fff',
          paper_bgcolor: '#fff',
          hovermode: 'closest'
        };
      }

      Plotly.newPlot('laplacianPlot', makeTraces('laplacian'), makeLayout('Laplacian Entropy', 'n (number of vertices)', 'Entropy'));

      Plotly.newPlot('adjacencyPlot', makeTraces('adjacency'), makeLayout('Adjacency Entropy', 'n (number of vertices)', 'Entropy'));

      Plotly.newPlot('ratioPlot', makeTraces('ratio'), makeLayout('Entropy Ratio (Laplacian / Adjacency)', 'n (number of vertices)', 'Ratio'));

      Plotly.newPlot('eulerPlot', makeTraces('euler'), makeLayout('Euler Characteristic (χ = V - E)', 'n (number of vertices)', 'χ'));
    });
</script>

</body>
</html>
